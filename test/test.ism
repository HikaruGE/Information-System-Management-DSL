entity Student{
	name : String
	phone : String
}

dispatcher student {
	
	/studentLst >> 
		page all(){
			data{
				students := Student.getAll()
			}
			
			body{
				Student.gotoCreate()
				table{
					row{
						col{output("id")},
						col{output("name")},
						col{output("phone")},
						col{output("operation")}
					}
					
					for student:Student in students{
						row{
							col{output(student.id)},
							col{output(student.name)},
							col{output(student.phone)},
							col{student.gotoEdit(Student),student.delete-btn(Student)}
						}
					}
				}
			}
		}
		
	/student/{id:Long} >>
		page edit(){
			data{
				student := Student.getById(id)
			}
			
			body{
				form(update Student){
					table{
						row{
							col{output("name")},col{input(student.name)}
						}
						row{
							col{output("phone")},col{input(student.phone)}
						}
						row{
							col{edit-btn},col{reset-btn}
						}
					}
				}
			}
		}
	
	/student >>
		page add(){
			body{
				form(create Student){
					table{
						row{
							col{output("name")},col{input(name)}
						}
						row{
							col{output("phone")},col{input(phone)}
						}
						row{
							col{create-btn},col{reset-btn}
						}
					}
				}
			}
		}
	
	/student >>
	create add(stu:Student){
		data{
			Student.save(stu)
		}
		goto(/studentLst)
	}
	
	/student >>
	update update(stu:Student){
		data{
			Student.save(stu)
		}
		goto(/studentLst)
	}
	
	/student/{id:Long} >>
	delete delete(stu:Student){
		data{
			Student.delete(id)
		}
		goto(/studentLst)
	}
	
}
